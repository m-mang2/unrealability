
![image](https://github.com/m-mang2/unrealability/assets/135841268/87791a15-4742-4865-9c8a-d99a3683f3fd)

Gameplay Effect
GAS는 게임의 데이터에 영향을 주는 객체를 별도로 분리해서 관리
대부분 게임플레이 이펙트와 어트리뷰트가 같이 동작
GAS 시스템에서 가장 많은 기능을 제공하는 클래스
3가지 타입중 하나 선택
* instant: 어트리뷰트에 즉각적으로 적용되는 게임 플레이 이펙트
* Duration : 지정한 시간 동안 동작하는 게임 플레이 이펙트
* Infinite:  명시적으로 종요하지 않으면 계속 동작하는 게임 플레이 이펙트


Modifier
Gameplay Effect에서 어트리뷰트 변경 방법을 지정한 설정을 모디파이어라고 함
사용방법
* 적용할 어트리뷰트에=의 지정
* 적용방식의 설정 : 더하기 곱하기 나누기 닾어쓰기
모디파이어의 계산 방법
* Scalable Float: 실수(데이터 테이블과 연동 가능)
* AttributeBsed : 특정어트리뷰트에 기반
* CustomCalculationClass : 계산을 담당하는 전용 클래스의 활용
* SetByCaller : 데이터 태그를 활용한 데이터 전달
모디파이어 없이 자체 계산 로직을 만드는것도 가능(GameplayEffectExecutionCalculation)

**c++으로는 복잡하여 blueprint 권장**
코드
```
DurationPolicy = EGameplayEffectDurationType::Instant;

FGameplayModifierInfo HealthModifier;
HealthModifier.Attribute = FGameplayAttribute(FindFieldChecked<FProperty>(UABCharacterAttributeSet::StaticClass(), GET_MEMBER_NAME_CHECKED(UABCharacterAttributeSet, Health)));
HealthModifier.ModifierOp = EGameplayModOp::Additive;

FScalableFloat DamageAmount(-30.0f);
FGameplayEffectModifierMagnitude ModMagnitude(DamageAmount);

HealthModifier.ModifierMagnitude = ModMagnitude;

Modifiers.Add(HealthModifier);
```
블루프린트
![image](https://github.com/m-mang2/unrealability/assets/135841268/1adcbe8c-2e63-450a-86db-939e45ea6d61)


추가로 SetbyCaller옵션은 태그에 값을 넣어주면 바로 사용
```
FGameplayEffectSpecHandle EffectSpecHandle = MakeOutgoingGameplayEffectSpec(AttackDamageEffect);
if (EffectSpecHandle.IsValid())
{
	EffectSpecHandle.Data->SetSetByCallerMagnitude(ABTAG_DATA_DAMAGE, -SourceAttribute->GetAttackRate());
	ApplyGameplayEffectSpecToTarget(CurrentSpecHandle, CurrentActorInfo, CurrentActivationInfo, EffectSpecHandle, TargetDatahandle);
}
```

Meta 어트리뷰트
어트리뷰트의 설정을 위해 사전에 미리 설정하는 임시 어트리뷰트
예시) 체력은 어트리뷰트, 데미지는 메타 어트리뷰트로 설정
데미지를 사용하는 경우 기획 추가에 유연한 대처가 가능
* 무적기능 추가
* 실드 기능추가
* 콤보 진행시 공격력 보정
메타 어트리뷰트는 적용 후 바로 0으로 값 초기화
메타 어트리뷰트는 리플리케이션에서 제외 시키는것이 일반적


레벨과 커브 테이블
ScalableFloat 모디파이어 타입에서 사용가능
애니메이션 노티파이에 지정 가능

게임플레이 이펙트의 생성과정
게임플레이 이펙트 컨텍스트와 게임 플레이 이펙트 스펙을 통해 생성할 수 있음
게임 플레이 이펙트 컨텍스트 : GameplayEffect에서 계산이 필요한 데이터를 담은 객체
* instigator
* Causer
* HitResult
게임 플레이 이펙트 스팩 : GameplayEffect에 관련된 정보를 담고 있는 개체
* 레벨, 모디파이어 및 각종 태그에 대한 정보
* 게임플레이 이펙트 컨텍스트 핸들
ASC는 각 데이터를 핸들 객체를 통해 간접적으로 관리함
따라서 이펙트 컨텍스트 핸들을 만든  후 이펙트 스펙 핸들을 생성하는 순서로 진행되어야함
![image](https://github.com/m-mang2/unrealability/assets/135841268/c438c817-d187-426b-bcea-50ee4972d705)





