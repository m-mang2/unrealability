# 게임 플레이 어빌리티 시스템의 기본 흐름
![image](https://github.com/m-mang2/unrealability/assets/135841268/1d36dfc1-ee41-47bc-9255-20a148627555)

분수대 회전의 구현방법 3가지
1. 액터에 해당 기능구현
2. 게임 플레이 어빌리티 시스템으로 구현
3. 어빌리티 시스템에 게임플레이 태그를 부여하여 구현

# 게임 플레이 태그
* FName으로 관리되는 경량의 표식 데이터
* DefaultGameplayTags.ini에 저장됨
* 계층 구조로 구성되어 관리 (Actor.Action.Rotate)
* 계층 구조 검색 기능
   * HasTagExact
   * HasAny
   * HasAnyExact
   * HasAll
   * HasAllExact
* 어빌리티 시스템과는 독립적으로 사용가능
* 블루프린트와 조합하여 어빌리티에 대한 의존성을 없앨 수 있음

# 프로젝트에서 태그 설정하는 방법
Project Settings -> GameplayTags -> Gameplay Tag Redirects ->Add New Gameplay Tag 
![image](https://github.com/m-mang2/unrealability/assets/135841268/cd39a321-ff0d-42c6-9e4a-dd5674ebd743)

# 기록해둘것
```
TArray<TSubclassOf<class UGameplayAbility>> StartAbilities; // 블루프린트로 만들어서 저장

ASC에 넣어주면서 의존성을 줄일 수 있음
for (const auto& StartAbility : StartAbilities)
{
	FGameplayAbilitySpec StartSpec(StartAbility);
	ASC->GiveAbility(StartSpec);
}
```

![image](https://github.com/m-mang2/unrealability/assets/135841268/98106381-3daf-4696-a9d5-2065a36992f0)


## TSubclassOf
https://docs.unrealengine.com/4.27/ko/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/TSubclassOf/
UClass 유형의 클래스를 저장하는 템플릿 클래스로 객체를 생성하기 위한 클래스 정보를 담을 수 있음


# Tag에서 매칭이 되는 이유
```
Actor.Action.Rotate로 태그를 설정하였는데 Actor.State.IsRotating가 매칭 되는 이유는 모든 형태의 태그 이름이 저장되어 여기서 맞는것을 매칭함
FGameplayTagContainer TargetTag(ABTAG_ACTOR_ROTATE); // Actor.Action.Rotate
if (ASC->HasMatchingGameplayTag(ABTAG_ACTOR_ISROTATING) == false) // Actor.State.IsRotating
{
	ASC->TryActivateAbilitiesByTag(TargetTag);
}
else
{
	ASC->CancelAbilities(&TargetTag);
}
```
![image](https://github.com/m-mang2/unrealability/assets/135841268/df68236e-434b-4621-a8d0-5c39a2347d8a)
